<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Registro de Usuario</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <form id="registerForm" novalidate>
    <h2>Registro</h2>

    <!-- Nombre -->
    <div class="form-group">
      <label for="name">Nombre completo</label>
      <input type="text" id="name" name="name" required minlength="3" maxlength="40" placeholder="Ej: Juan P칠rez">
      <small class="error">El nombre debe tener entre 3 y 40 caracteres</small>
    </div>

    <!-- Email -->
    <div class="form-group">
      <label for="email">Correo electr칩nico</label>
      <input type="email" id="email" name="email" required placeholder="usuario@correo.com">
      <small class="error">Por favor ingresa un correo v치lido</small>
    </div>

    <!-- Password -->
    <div class="form-group">
      <label for="password">Contrase침a</label>
      <input type="password" id="password" name="password" required minlength="8" 
             pattern="^(?=.*[A-Z])(?=.*[a-z])(?=.*\\d)(?=.*[\\W_]).+$"
             placeholder="Debe tener may칰scula, n칰mero y s칤mbolo">
      <small class="error">La contrase침a debe tener al menos 8 caracteres, incluyendo may칰scula, n칰mero y s칤mbolo</small>
    </div>

    <!-- Confirm Password -->
    <div class="form-group">
      <label for="confirmPassword">Confirmar contrase침a</label>
      <input type="password" id="confirmPassword" name="confirmPassword" required>
      <small class="error">Las contrase침as no coinciden</small>
    </div>

    <!-- Submit -->
    <button type="submit">Registrarse</button>
  </form>

  <script>
    const form = document.getElementById('registerForm');
    const inputs = form.querySelectorAll('input');
    
    function showError(input, message) {
      const error = input.nextElementSibling;
      error.textContent = message;
      error.style.display = 'block';
    }
    
    function hideError(input) {
      const error = input.nextElementSibling;
      error.style.display = 'none';
    }
    
    inputs.forEach(input => {
      input.addEventListener('input', () => {
        if (input.validity.valid) {
          hideError(input);
        } else {
          showError(input, input.validationMessage);
        }
      });
    });
    
    form.addEventListener('submit', e => {
      e.preventDefault();
      
      let valid = true;
      inputs.forEach(input => {
        if (!input.validity.valid) {
          showError(input, input.validationMessage);
          valid = false;
        }
      });

      // Extra: validaci칩n de confirmaci칩n de password
      const password = document.getElementById('password');
      const confirmPassword = document.getElementById('confirmPassword');
      if (password.value !== confirmPassword.value) {
        showError(confirmPassword, 'Las contrase침as no coinciden');
        valid = false;
      }

      if (valid) {
        alert('Registro exitoso 游꿀');
        form.reset();
      }
    });
  </script>
</body>
</html>
